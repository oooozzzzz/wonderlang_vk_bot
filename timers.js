import { getUserInfo, setOutdated } from "./db.js";
import { delay } from "./services.js";
import { sendMessage } from "./upload.js";

const timers = {}; // –û–±—ä–µ–∫—Ç –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
async function function24(userId) {
	await setOutdated(userId);
	console.log(`–§—É–Ω–∫—Ü–∏—è 1 –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId}.`);
}

const sendMessages = async (userId, text1, text2) => {
	await sendMessage(userId, text1);
	await delay(1500);
	await sendMessage(userId, text2);
};

async function function21(userId) {
	const userInfo = await getUserInfo(userId);
	const test = userInfo.test;
	let text1;
	let text2;
	switch (test) {
		case "d1":
			text1 = `‚è∞–ó–∞–±–æ—Ç–ª–∏–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ø—Ä–æ–π–¥–∏—Ç–µ 20-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–µ—Å—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 3-—Ö —á–∞—Å–æ–≤, –∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

‚úÖ–ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ–µ–º —É—Ä–æ–≤–Ω–µ + –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
‚úÖ 3 –ø–æ–¥–∞—Ä–∫–∞.`;
			text2 = `üéÅ –ü–æ—á–µ–º—É –ø–æ–¥–∞—Ä–∫–∏ —Å—Ç–æ—è—Ç —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞ –Ω–∏—Ö –ø–æ–±–æ—Ä–æ—Ç—å—Å—è?

‚ñ´Ô∏è –í—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–µ—Ä–Ω—É—é –≥—Ä–∞–º–º–∞—Ç–∏–∫—É –≤ —Ä–µ—á–∏ –Ω–µ –∑–∞–¥—É–º—ã–≤–∞—è—Å—å.
‚ñ´Ô∏è –í—ã —Å–º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥, –ø–µ—Ä–µ–¥ –∫–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º –Ω—É–∂–µ–Ω –∞—Ä—Ç–∏–∫–ª—å 'the', –∞ –ø–µ—Ä–µ–¥ –∫–∞–∫–∏–º ‚Äì –Ω–µ—Ç.
‚ñ´Ô∏è –í—ã –ª–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç–µ —Ñ—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–∞–º –î–∂–æ–±—Å, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—è –æ —Å–≤–æ–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º –ø—É—Ç–∏.

–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å–µ–π—á–∞—Å –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏:

üëâ https://forms.gle/JvvxphzWKN8XHPgr8`;
			await sendMessages(userId, text1, text2);
			break;
		case "d2":
			text1 = `‚è∞–ó–∞–±–æ—Ç–ª–∏–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ø—Ä–æ–π–¥–∏—Ç–µ 20-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–µ—Å—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 3-—Ö —á–∞—Å–æ–≤, –∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

‚úÖ–ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ–µ–º —É—Ä–æ–≤–Ω–µ + –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

‚úÖ 3 –ø–æ–¥–∞—Ä–∫–∞.`;
			text2 = `üéÅ –ü–æ—á–µ–º—É –ø–æ–¥–∞—Ä–∫–∏ —Å—Ç–æ—è—Ç —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞ –Ω–∏—Ö –ø–æ–±–æ—Ä–æ—Ç—å—Å—è?

‚ñ´Ô∏è –í—ã –ø–æ–ª—É—á–∏—Ç–µ 15 TED talks, –æ—Ç –∫–æ—Ç–æ—Ä—ã—Ö –≤ –≤–æ—Å—Ç–æ—Ä–≥–µ –≤—Å–µ –º–æ–∏ —É—á–µ–Ω–∏–∫–∏, –∏ —Å–º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Ö –¥–ª—è —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∑–∞–Ω—è—Ç–∏–π.
‚ñ´Ô∏è –í—ã —Å–º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥, –ø–µ—Ä–µ–¥ –∫–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º –Ω—É–∂–µ–Ω –∞—Ä—Ç–∏–∫–ª—å 'the', –∞ –ø–µ—Ä–µ–¥ –∫–∞–∫–∏–º ‚Äì –Ω–µ—Ç.
‚ñ´Ô∏è –í—ã –ª–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç–µ —Ñ—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–∞–º –î–∂–æ–±—Å, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—è –æ —Å–≤–æ–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º –ø—É—Ç–∏.

–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å–µ–π—á–∞—Å –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏:

üëâ https://forms.gle/eb2cvMxsBbPbQypV8`;
			await sendMessages(userId, text1, text2);
			break;
		case "IELTS":
			text1 = `‚è∞–ó–∞–±–æ—Ç–ª–∏–≤–æ–µ –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ: –ø—Ä–æ–π–¥–∏—Ç–µ 20-–º–∏–Ω—É—Ç–Ω—ã–π —Ç–µ—Å—Ç –≤ —Ç–µ—á–µ–Ω–∏–µ 3-—Ö —á–∞—Å–æ–≤, –∏ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:

‚úÖ–ø–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–≤–æ–µ–º —É—Ä–æ–≤–Ω–µ + –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –∫ IELTS

‚úÖ 3 –ø–æ–¥–∞—Ä–∫–∞.`;
			text2 = `üéÅ –ü–æ—á–µ–º—É –ø–æ–¥–∞—Ä–∫–∏ —Å—Ç–æ—è—Ç —Ç–æ–≥–æ, —á—Ç–æ–±—ã –∑–∞ –Ω–∏—Ö –ø–æ–±–æ—Ä–æ—Ç—å—Å—è?

‚ñ´Ô∏è –í—ã —É–∑–Ω–∞–µ—Ç–µ, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—É—é –º–∏–Ω—É—Ç—É –Ω–∞ IELTS Speaking, —á—Ç–æ–±—ã —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∏–¥–µ–∞–ª—å–Ω—ã–π –º–æ–Ω–æ–ª–æ–≥.
‚ñ´Ô∏è –í—ã —Å–º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∑–∞ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥, –ø–µ—Ä–µ–¥ –∫–∞–∫–∏–º –Ω–∞–∑–≤–∞–Ω–∏–µ–º –Ω—É–∂–µ–Ω –∞—Ä—Ç–∏–∫–ª—å 'the', –∞ –ø–µ—Ä–µ–¥ –∫–∞–∫–∏–º ‚Äì –Ω–µ—Ç.
‚ñ´Ô∏è –í—ã –ª–µ–≥–∫–æ –∑–∞–ø–æ–º–Ω–∏—Ç–µ —Ñ—Ä–∞–∑—ã, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª —Å–∞–º –î–∂–æ–±—Å, —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞—è –æ —Å–≤–æ–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–º –ø—É—Ç–∏.

–ü—Ä–æ–π—Ç–∏ —Ç–µ—Å—Ç —Å–µ–π—á–∞—Å –∏ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–¥–∞—Ä–∫–∏:

üëâ https://forms.gle/CrLxDyM5NabgCjeX8`;
			await sendMessages(userId, text1, text2);
			break;
		default:
			break;
	}
}
// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç–∞–π–º–µ—Ä–∞
export function startTimer(userId) {
	// –ü—Ä–æ–≤–µ—Ä–∫–∞, –µ—Å—Ç—å –ª–∏ —É–∂–µ —Ç–∞–π–º–µ—Ä –¥–ª—è —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
	if (timers[userId]) {
		console.log(`–¢–∞–π–º–µ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId} —É–∂–µ –∑–∞–ø—É—â–µ–Ω.`);
		return;
	}

	// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ 24 —á–∞—Å–∞
	const timer24h = setTimeout(async () => {
		await function24(userId);
		delete timers[userId]; // –£–¥–∞–ª—è–µ–º —Ç–∞–π–º–µ—Ä –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
	}, 24 * 60 * 60 * 1000); // 24 —á–∞—Å–∞ –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö

	// –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–∞–π–º–µ—Ä–∞ –Ω–∞ 3 —á–∞—Å–∞ –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è
	const timer3h = setTimeout(async () => {
		await function21(userId);
	}, 21 * 60 * 60 * 1000); // 21 —á–∞—Å –≤ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥–∞—Ö (3 —á–∞—Å–∞ –¥–æ –∫–æ–Ω—Ü–∞)

	// –°–æ—Ö—Ä–∞–Ω—è–µ–º –æ–±–∞ —Ç–∞–π–º–µ—Ä–∞ –≤ –æ–±—ä–µ–∫—Ç–µ
	timers[userId] = { timer24h, timer3h };
	console.log(`–¢–∞–π–º–µ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId} –∑–∞–ø—É—â–µ–Ω.`);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–∞–π–º–µ—Ä–∞
export function clearTimer(userId) {
	const userTimer = timers[userId];
	if (userTimer) {
		clearTimeout(userTimer.timer24h);
		clearTimeout(userTimer.timer3h);
		delete timers[userId]; // –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å –æ —Ç–∞–π–º–µ—Ä–µ
		console.log(`–¢–∞–π–º–µ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId} —É–¥–∞–ª–µ–Ω.`);
	} else {
		console.log(`–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId}.`);
	}
}

const sendGifts = async (userId) => {
	let text1;
	let text2;
	const userInfo = await getUserInfo(userId);
	switch (userInfo.test) {
		case "d1":
			text1 = `–ê –≤–æ—Ç –∏ –≤–∞—à–∏ –ø–æ–¥–∞—Ä–∫–∏!

‚ñ´Ô∏è –ì–∞–π–¥ "–ö–∞–∫ –Ω–∞—É—á–∏—Ç—å—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≥—Ä–∞–º–º–∞—Ç–∏–∫—É –Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–µ"
üëâ https://drive.google.com/file/d/1B4AZ5amhi_2Wzqn0s7rjQ0CuvCjEmPJZ/view?usp=drive_link

‚ñ´Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–∞–π–Ω–¥-–∫–∞—Ä—Ç–∞ "–ê—Ä—Ç–∏–∫–ª–∏ —Å –∏–º–µ–Ω–∞–º–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏"
üëâ https://gitmind.com/app/docs/m2ylhcv6

‚ñ´Ô∏è–ù–∞–±–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ Quizlet —Å 12 —Å–ª–æ–≤–∞–º–∏ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ø–æ —Ç–µ–º–µ "–†–∞–±–æ—Ç–∞" –∏–∑ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–π —Ä–µ—á–∏ –°—Ç–∏–≤–∞ –î–∂–æ–±—Å–∞
üëâ https://quizlet.com/787010607/lesson-7-work-and-business-steve-jobs-commencement-speech-flash-cards/?i=4nac36&x=1jqt`;
			text2 = `–ë–æ–ª—å—à–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤ —ç—Ç–æ–π –ø–æ–¥–±–æ—Ä–∫–µ –ø–æ—Å—Ç–æ–≤ –≤ –º–æ–µ–º –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ:

üëâ https://t.me/wonderlang_learners/420`;
			break;
		case "d2":
			text1 = `–ê –≤–æ—Ç –∏ –≤–∞—à–∏ –ø–æ–¥–∞—Ä–∫–∏!

‚ñ´Ô∏è –ì–∞–π–¥ "15 TED talks –ø–æ 15 —Ç–µ–º–∞–º"
üëâ https://drive.google.com/file/d/1MyvDs-b-07ytMo956df2jei7LNi9fMei/view?usp=sharing

‚ñ´Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–∞–π–Ω–¥-–∫–∞—Ä—Ç–∞ "–ê—Ä—Ç–∏–∫–ª–∏ —Å –∏–º–µ–Ω–∞–º–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏"
üëâ https://gitmind.com/app/docs/m2ylhcv6

‚ñ´Ô∏è–ù–∞–±–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ Quizlet —Å 12 —Å–ª–æ–≤–∞–º–∏ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ø–æ —Ç–µ–º–µ "–†–∞–±–æ—Ç–∞" –∏–∑ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–π —Ä–µ—á–∏ –°—Ç–∏–≤–∞ –î–∂–æ–±—Å–∞
üëâ https://quizlet.com/787010607/lesson-7-work-and-business-steve-jobs-commencement-speech-flash-cards/?i=4nac36&x=1jqt`;
			text2 = `–ë–æ–ª—å—à–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤ —ç—Ç–æ–π –ø–æ–¥–±–æ—Ä–∫–µ –ø–æ—Å—Ç–æ–≤ –≤ –º–æ–µ–º –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ:

üëâ https://t.me/wonderlang_learners/419`;
			break;
		case "d2IELTS":
			text1 = `–ê –≤–æ—Ç –∏ –≤–∞—à–∏ –ø–æ–¥–∞—Ä–∫–∏!

‚ñ´Ô∏è –≤–∏–¥–µ–æ-—É—Ä–æ–∫ –∏–∑ –∫—É—Ä—Å–∞ "IELTS INSIGHT" "–ö–∞–∫ –±—ã—Å—Ç—Ä–æ —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –º–æ–Ω–æ–ª–æ–≥ –Ω–∞ —ç–∫–∑–∞–º–µ–Ω–µ –≤ —á–∞—Å—Ç–∏ Speaking"
üëâ https://kinescope.io/o6tQwfMqUDrjiE9zGTL9vL

‚ñ´Ô∏è –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –º–∞–π–Ω–¥-–∫–∞—Ä—Ç–∞ "–ê—Ä—Ç–∏–∫–ª–∏ —Å –∏–º–µ–Ω–∞–º–∏ –∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏"
üëâ https://gitmind.com/app/docs/m2ylhcv6

‚ñ´Ô∏è–ù–∞–±–æ—Ä –∫–∞—Ä—Ç–æ—á–µ–∫ Quizlet —Å 12 —Å–ª–æ–≤–∞–º–∏ –∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏ –ø–æ —Ç–µ–º–µ "–†–∞–±–æ—Ç–∞" –∏–∑ –∑–Ω–∞–º–µ–Ω–∏—Ç–æ–π —Ä–µ—á–∏ –°—Ç–∏–≤–∞ –î–∂–æ–±—Å–∞
üëâ https://quizlet.com/787010607/lesson-7-work-and-business-steve-jobs-commencement-speech-flash-cards/?i=4nac36&x=1jqt`;
			text2 = `–ë–æ–ª—å—à–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –≤—ã –Ω–∞–π–¥–µ—Ç–µ –≤ —ç—Ç–æ–π –ø–æ–¥–±–æ—Ä–∫–µ –ø–æ—Å—Ç–æ–≤ –≤ –º–æ–µ–º –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª–µ:

üëâ https://t.me/wonderlang_learners/418`;
			break;
		default:
			break;
	}
	await sendMessages(userId, text1, text2);
	await delay(2000);
	await sendMessage(
		userId,
		`–ë–ª–∞–≥–æ–¥–∞—Ä—é –≤–∞—Å –∑–∞ –∏–Ω—Ç–µ—Ä–µ—Å –∫ WonderLang School!

–ü–æ –ª—é–±—ã–º –≤–æ–ø—Ä–æ—Å–∞–º –ø–∏—à–∏—Ç–µ —Å—é–¥–∞:
 https://vk.com/im?sel=-213318868

–û—Ç–≤–µ—á—É, –ø–æ–º–æ–≥—É, —Å–æ—Ä–∏–µ–Ω—Ç–∏—Ä—É—é!`,
	);
	console.log("–ü–æ–¥–∞—Ä–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã");
};

const giftTimers = {};
export async function updateTimer(userId) {
	const userInfo = await getUserInfo(userId);
	const userTimer = giftTimers[userId];
	if (userTimer) {
		clearTimeout(userTimer);
		delete giftTimers[userId]; // –£–¥–∞–ª—è–µ–º –∑–∞–ø–∏—Å—å –æ —Ç–∞–π–º–µ—Ä–µ
	} else {
		console.log(`–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId}.`);
	} // Clear existing timer
	if (userInfo.outdated) {
		return;
	}
	const giftTimer = setTimeout(async () => {
		await sendGifts(userId);
	}, 90 * 60 * 1000);

	giftTimers[userId] = giftTimer;
	console.log(`–¢–∞–π–º–µ—Ä –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ${userId} –æ–±–Ω–æ–≤–ª–µ–Ω.`);
}
