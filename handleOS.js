import { getUserInfo } from "./db.js";
import { builder } from "./keyboards.js";
import { delay } from "./services.js";
import { sendDocument } from "./upload.js";

export const handleOS = async (ctx) => {
	const userInfo = await getUserInfo(ctx.senderId);
	await sendDocument({
		userId: ctx.senderId,
		fileName: `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã_–¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏_${ctx.senderId}.docx`,
		message: `–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏`,
	});
	await delay(1000);
	if (userInfo.test === "d1") {
		if (userInfo.points <= 45) {
			await ctx.send(
				`–¢–µ—Å—Ç –≤—ã—è–≤–∏–ª —É –≤–∞—Å –Ω–µ–º–∞–ª–æ –ø—Ä–æ–±–µ–ª–æ–≤ –≤ –∑–Ω–∞–Ω–∏–∏ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª –∞–Ω–≥–ª–∏–π—Å–∫–æ–π –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏. 

–ö–∞–∫–∏—Ö –∏–º–µ–Ω–Ω–æ? –ü–æ–∫–∞–∑—ã–≤–∞—é –≤ —Ñ–∞–π–ª–µ‚òùÔ∏è

–•–æ—Ç–∏—Ç–µ, —É–≥–∞–¥–∞—é, –æ —á–µ–º –≤—ã —Å–µ–π—á–∞—Å –ø–æ–¥—É–º–∞–ª–∏?)`,
				{ keyboard: builder([{ label: "–ù–µ–º–Ω–æ–≥–æ —Ç–µ–ª–µ–ø–∞—Ç–∏–∏))" }]) },
			);
		} else {
			await ctx.send(`–£ –í–∞—Å —É–∂–µ –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∏–π –≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç, –Ω–æ –æ—Å—Ç–∞—é—Ç—Å—è —Ç–æ—á–µ—á–Ω—ã–µ –ø—Ä–æ–±–µ–ª—ã –≤ –∑–Ω–∞–Ω–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤–∞–∂–Ω—ã—Ö —Ç–µ–º.
–ö–∞–∫–∏—Ö –∏–º–µ–Ω–Ω–æ? –ü–æ–∫–∞–∑—ã–≤–∞—é –≤ —Ñ–∞–π–ª–µ‚òùÔ∏è

–ï—Å–ª–∏ –Ω–µ –∑–∞–∫—Ä—ã—Ç—å —ç—Ç–∏ –ø—Ä–æ–±–µ–ª—ã, —Ç–æ:
‚ñ´Ô∏è –≤–∞–º –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –±–æ–ª–µ–µ "–ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö" —Ç–µ–º–∞—Ö
‚ñ´Ô∏è –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–¥–µ–ª–∞—Ç—å "–æ–±–∏–¥–Ω—ã—Ö" –æ—à–∏–±–æ–∫ –Ω–∞ –≤–∞–∂–Ω–æ–º —ç–∫–∑–∞–º–µ–Ω–µ –∏ –ø–æ—Ç–µ—Ä—è—Ç—å –±–∞–ª–ª—ã.`);
			await delay(1500);
			await ctx.send(
				`–í—ã —Ö–æ—Ç–∏—Ç–µ –ø—Ä–æ—Ä–∞–±–æ—Ç–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–Ω—ã—Ö –≤ —Ç–∞–±–ª–∏—Ü–µ —Ç–µ–º –∑–∞ 3 –¥–Ω—è?üëá`,
				{ keyboard: builder([{ label: "–•–æ—á—É –∑–∞–∫—Ä—ã—Ç—å –ø—Ä–æ–±–µ–ª—ã" }]) },
			);
		}
	} else if (userInfo.test === "d2") {
		const points = userInfo.points;
		if (points <= 17) {
			await ctx.send(
				`–°—É–¥—è –ø–æ –í–∞—à–µ–º—É –∑–Ω–∞–Ω–∏—é –ª–µ–∫—Å–∏–∫–∏ –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –í–∞—à –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –ø–æ–∫–∞ –Ω–µ –¥–æ—Å—Ç–∏–≥ —É—Ä–æ–≤–Ω—è B1. 
–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ
–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º: 
https://vk.com/im?sel=-213318868
–ê —Ç–µ–ø–µ—Ä—å ‚Äì –∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º`,
				{
					keyboard: builder([{ label: "–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" }]),
				},
			);
		} else if (points > 17 && points <= 19) {
			await ctx.send(
				`–°—É–¥—è –ø–æ –í–∞—à–µ–º—É –∑–Ω–∞–Ω–∏—é –ª–µ–∫—Å–∏–∫–∏ –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏, –í–∞—à –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ —É—Ä–æ–≤–Ω—é B1.
–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ
–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º: 
https://vk.com/im?sel=-213318868
–ê —Ç–µ–ø–µ—Ä—å ‚Äì –∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º`,
				{
					keyboard: builder([{ label: "–ü–æ–ª—É—á–∏—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏" }]),
				},
			);
		} else if (points >= 20 && points < 26) {
			await ctx.send(
				`–í–∞—à–µ –∑–Ω–∞–Ω–∏–µ –ª–µ–∫—Å–∏–∫–∏ –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ ‚Äì –Ω–∞ —É—Ä–æ–≤–Ω–µ B1. 
–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ
–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º:
https://vk.com/im?sel=-213318868
–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å —É—Ä–æ–≤–Ω—è B2?`,
				{
					keyboard: builder([{ label: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è" }]),
				},
			);
		} else if (points >= 26 && points < 30) {
			await ctx.send(
				`–í–∞—à –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ —É—Ä–æ–≤–Ω—é B2.
–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ
–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º:
https://vk.com/im?sel=-213318868
–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å —É—Ä–æ–≤–Ω—è B2?`,
				{
					keyboard: builder([{ label: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è" }]),
				},
			);
		} else if (points >= 30 && points < 36) {
			await ctx.send(
				`–í–∞—à–µ –∑–Ω–∞–Ω–∏–µ –ª–µ–∫—Å–∏–∫–∏ –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ ‚Äì –Ω–∞ —É—Ä–æ–≤–Ω–µ B2.

–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ
–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º:
https://vk.com/im?sel=-213318868
–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å —É—Ä–æ–≤–Ω—è C1?`,
				{
					keyboard: builder([{ label: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è" }]),
				},
			);
		} else if (points >= 36 && points < 40) {
			await ctx.send(
				`–í–∞—à –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –ø—Ä–∏–±–ª–∏–∂–∞–µ—Ç—Å—è –∫ —É—Ä–æ–≤–Ω—é C1.

–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ
–ï—Å–ª–∏ –ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º:
https://vk.com/im?sel=-213318868
–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å —É—Ä–æ–≤–Ω—è C1?üëá`,
				{
					keyboard: builder([{ label: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è" }]),
				},
			);
		} else if (points >= 40 && points < 46) {
			await ctx.send(
				`–í–∞—à–µ –∑–Ω–∞–Ω–∏–µ –ª–µ–∫—Å–∏–∫–∏ –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ ‚Äì –Ω–∞ —É—Ä–æ–≤–Ω–µ –°1.

–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ‚òùÔ∏è
–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º:
https://vk.com/im?sel=-213318868
–•–æ—Ç–∏—Ç–µ —É–∑–Ω–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è, —á—Ç–æ–±—ã –¥–æ—Å—Ç–∏—á—å —É—Ä–æ–≤–Ω—è C2?üëá`,
				{
					keyboard: builder([{ label: "–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –≤—Ä–µ–º—è" }]),
				},
			);
		} else if (points >= 46) {
			await ctx.send(
				`–í–∞—à–µ –∑–Ω–∞–Ω–∏–µ –ª–µ–∫—Å–∏–∫–∏ –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏ –Ω–µ –Ω–∏–∂–µ —É–≤–µ—Ä–µ–Ω–Ω–æ–≥–æ –°1. –ë—Ä–∞–≤–æ!

–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ‚òùÔ∏è
–ï—Å–ª–∏ –ø–æ—è–≤—è—Ç—Å—è –≤–æ–ø—Ä–æ—Å—ã –ø–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏, –Ω–∞–ø–∏—à–∏—Ç–µ –Ω–∞–º:
https://vk.com/im?sel=-213318868
–¢–µ–ø–µ—Ä—å ‚Äì –∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–ºüëá
`,
				{
					keyboard: builder([{ label: "–ß—Ç–æ –¥–∞–ª—å—à–µ?" }]),
				},
			);
		}
	} else if (userInfo.test === "d2IELTS") {
		await ctx.send(
			`–í–∞—à —É—Ä–æ–≤–µ–Ω—å: [—Å–º. –≤—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–±–µ—Ü —Ç–∞–±–ª–∏—Ü—ã https://docs.google.com/document/d/1zFMyZJr5iZmmwTjx7wah_JpRFQjdfeiiMf9tmgZPZxE/edit?tab=t.0]

–ü–æ–¥—Ä–æ–±–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—à–∏—Ö –æ—à–∏–±–∫–∞—Ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö —Ç–µ–º–∞—Ö —Å–æ–±—Ä–∞–ª–∏ –¥–ª—è –≤–∞—Å –≤ —Ñ–∞–π–ª–µ‚òùÔ∏è

‚ùì–°–∫–æ–ª—å–∫–æ –±–∞–ª–ª–æ–≤ –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –Ω–∞ IELTS —Å —Ç–∞–∫–∏–º –∑–Ω–∞–Ω–∏–µ–º –ª–µ–∫—Å–∏–∫–∏ –∏ –≥—Ä–∞–º–º–∞—Ç–∏–∫–∏?

–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—åüëá`,
			{ keyboard: builder([{ label: "–°–∫–æ–ª—å–∫–æ —ç—Ç–æ –±–∞–ª–ª–æ–≤?" }]) },
		);
	}
};
